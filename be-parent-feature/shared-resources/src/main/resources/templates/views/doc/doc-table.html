<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<body th:fragment="content">
    <div class="col-sm-12 p-0">
        <h2 class="title-box" th:text="#{search.results.title}">Kết quả tìm kiếm</h2>
        <div class="box-tools pull-right">
            <a class="btn-common pull-right" id="btnExportCsv"> <i class="fa fa-download" aria-hidden="true"></i> <span
                th:text="' '+#{common.csv}"></span>
            </a>
            <a class="btn-common pull-right" id="btnExportExcel" style="margin-right: 5px;"> <i class="fa fa-download" aria-hidden="true"></i> <span
                th:text="' '+#{common.excel}"></span>
            </a>
        </div>
        <div class="table-responsive">
            <table class="table table-bordered table-striped">
                <thead>
                    <tr>
                        <th class="u_t_no">#</th>
                        <th class="u_t_action" th:text="#{action.label}">Action</th>
                        <th th:text="#{company.detail}" th:if="${#authentication?.principal?.companyIdList.size()>1 or #authentication?.principal?.companyAdmin}">Company</th>
						<th th:text="#{doc.doc.title}">Title</th>
						<th th:text="#{doc.form}">Service Name</th>
						<th th:text="#{doc.created.date}">Created date</th>
						<th th:text="#{doc.created.by}">Created by</th>
						<th th:text="#{doc.updated.date}">Updated date</th>
						<th th:text="#{doc.updated.by}">Updated by</th>
						<th th:text="#{doc.status}">Status</th>
						<th:block th:if="${columnNames.size() > 0}">
							<th:block th:each="item, i : ${columnNames}">
								<th th:text="${item}">Component name</th>
							</th:block>
						</th:block>
                    </tr>
                </thead>
                <tbody>
                    <th:block th:if="${pageWrapper.data.size() > 0}">
                        <th:block th:each="item, i : ${pageWrapper.data}" th:with="startIndex=${pageWrapper.startIndexCurrent}">
                            <tr th:attr="data-dto-id=${item.id}">
                                <td th:text="${i.index + startIndex}"></td>
                                <td class="text-center nowrap">
                                    <div>
                                        <!--th:if="${@roleConfig.hasRole(@CommonConstant.TODO +':Edit')}"-->
                                        <a class="fa fa-history fa-lg btn-process-his" style="vertical-align: 0%; color: #304d50;"></a>
                                        <a class="glyphicon glyphicon-download-alt custom-icon j-btn-download btn-download-pdf" th:attr="data-form-file-name=${item.formFileName}" style="color: #304d50;"></a>
                                        <a class="glyphicon glyphicon-edit custom-icon j-btn-edit btn-edit" th:attr="data-id=${item.id}"></a>
                                        <a class="glyphicon glyphicon-remove-sign font-size-20 red  j-btn-delete btn-delete" th:attr="data-id=${item.id}" th:if="${#authorization.expression('hasAuthority(@roleConstant.MY_DOCUMENTS)')}"></a>
                                    </div>
                                </td>
                                <td th:if="${#authentication?.principal?.companyIdList.size()>1 or #authentication?.principal?.companyAdmin}" th:text="${item.companyName}"></td>
								<td th:text="${item.docTitle}"></td>
								<td th:text="${item.formName}"></td>
								<td class="text-center" th:text="${item.createdDate!= null ? #dates.format(item.createdDate, @systemConfig.getConfig('DATE_PATTERN') ): ''}"></td>
								<td th:text="${item.createdBy}"></td>
								<td class="text-center" th:text="${item.updatedDate!= null ? #dates.format(item.updatedDate, @systemConfig.getConfig('DATE_PATTERN') ): ''}"></td>
								<td th:text="${item.updatedBy}"></td>
								<td class="text-center" th:text="${item.statusName}"></td>
								<th:block th:if="${columnNames.size() > 0}">
									<th:block th:each="componentName, i : ${columnNames}" th:with="valueCell=${item.componentList.get(componentName)}">
										<th:block th:if="${valueCell}">
											<td th:if="${#strings.startsWith(valueCell,'data:image/png;base64')}" class="text-center">
												<img th:src="${valueCell}" style="max-height: 50px;" />
											</td>
											<td th:unless="${#strings.startsWith(valueCell,'data:image/png;base64')}" th:text="${valueCell}"></td>
										</th:block>
										<th:block th:unless="${valueCell}">
											<td th:text="${valueCell}"></td>
										</th:block>
									</th:block>
								</th:block>
                            </tr>
                        </th:block>
                    </th:block>
                    <th:block th:if="${pageWrapper.data.size() == 0}">
                        <tr>
                            <td colspan="100%" th:text="#{table.emptyTable.label}"></td>
                        </tr>
                    </th:block>
                </tbody>
            </table>
			<form method="POST" role="form" id='form-pdf-export'>
				<input type="hidden" name="formFileName" id='form-file-name' />
			</form>
		</div>
    </div>
    <th:block th:include="views/commons/pagination.html :: content" />
    <script type="text/javascript" th:src="@{/static/cache/js/doc/doc-table.js}"></script>
</body>
</html>