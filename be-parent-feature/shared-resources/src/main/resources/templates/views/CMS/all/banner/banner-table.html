<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org">
	<body th:fragment="content">
		<div class="row m-0">
			<div class="header-box">
				<div class="row">
					<div class="col-sm-4">
						<h2 class="title-box" th:text="#{search.results.title}">Kết Quả Tìm Kiếm </h2>
					</div>
					<div class="col-sm-8 align-right">
						<!-- Sắp xếp lại -->
						<!-- <button id="btnSort" type="button" class="btn-ico"> 
							<img th:src="@{/static/images/icon-cog.png}" alt="" width="18px"/>
						</button>
						
						<!-- Export Excel -->
						<!-- <button class="btn-ico" type="button" id="btnDownload">
							<img th:src="@{/static/images/icon-excel.png}" alt="" width="19px">
						</button> -->
						
						<!-- Hiển thị cột -->
						<div class="button-group drop-setting pull-right">
							<button type="button" class="btn-ico dropdown-toggle" data-toggle="dropdown" th:title="#{searchfield.disp.column.show}">
									<img th:src="@{/static/images/icon-cog.png}" alt="" width="18px"/>
							</button>
							
							<ul class="dropdown-menu dropdown-filter-sort sort">
								 <th:block th:each="orderColumn : ${order}">
								 	<li>
										<a class="small">
											<input type="checkbox" th:checked="${orderColumn.isChecked()}" th:disabled="${orderColumn.isPrimary()}" 
												th:attr="data-name=${orderColumn.field} + 'Show', data-column=${orderColumn.column}" onchange="showAndHideColum(this)">
											<label th:text="${orderColumn.fieldName}"></label>
										</a>
									</li>
								</th:block>
							</ul>
						</div>
					</div>
				</div>
			</div>
			
			<div class="table-responsive no-padding col-sm-12" id="idDivTable">
				<table class="table table-bordered table-striped table-hover" id="tbl-manager-banner" style="white-space: normal">
					<thead>
						<tr>
							<th class="u_t_no">#</th>
							<th class="u_t_action" th:text="#{action.label}">Thao tác</th>
							
							 <th:block th:each="orderColumn : ${order}">
							 	<th th:class="${orderColumn.field} + 'Show' + ${orderColumn.isChecked() ? ' text-center' : ' text-center hidden'}" 
							 		th:attr="data-column=${orderColumn.column}, data-sort='NULL'" 
							 		th:onclick="sortColumn(this, setConditionBySort(), 'banner/ajaxList', C_NAME)">
							 		<span th:text="${orderColumn.fieldName}">Header</span>
							 		<i th:class="'fa fa-sort ' + ${orderColumn.field}" aria-hidden="true" th:attr="data-name=${orderColumn.field}"></i>
						 		</th>
							 </th:block>
						</tr>
					</thead>
					<tbody>
						<th:block th:each="dataRow,i : ${pageWrapper.data}" th:with="startIndex=${pageWrapper.startIndexCurrent}">
							<tr th:attr="data-banner-id=${dataRow.id}" class="trEdit">
								<td class="text-center" th:text="${i.index + startIndex}"></td>
								<td class="align-center">
									<!-- Detail -->
									<i class="j-btn-detail glyphicon glyphicon-eye-open custom-icon" th:title="#{icon.view}"
										th:if="${hasRoleForDetail}">
									</i>
									
									<!-- Edit web-->
									<i class="glyphicon glyphicon-edit custom-icon j-btn-edit" th:title="#{icon.edit}" th:if="${hasRoleForEdit}">
										<!-- th:if="${hasRoleForEdit AND dataRow.canBeUpdatedWeb ==0
																AND dataRow.bannerDevice == 1}"> -->
																
									</i>
									<!-- 
									Edit mobile
									<i class="glyphicon glyphicon-edit custom-icon j-btn-edit" th:title="#{icon.edit}"
										th:if="${hasRoleForEdit AND dataRow.canBeUpdatedMobileApp ==0 
																AND dataRow.bannerDevice == 2}">
									</i> -->

									<!-- Delete web-->
									<i class="glyphicon glyphicon-remove-sign font-size-20 red j-btn-delete" th:title="#{icon.delete}" th:if="${hasRoleForDelete}">
										<!-- th:if="${hasRoleForDelete AND dataRow.canBeDeletedWeb == 0
																AND dataRow.bannerDevice == 1}"> -->
									</i>
									<!-- 
									Delete mobile
									<i class="glyphicon glyphicon-remove-sign font-size-20 red j-btn-delete" th:title="#{icon.delete}"
										th:if="${hasRoleForDelete AND dataRow.canBeDeletedMobileApp == 0
																AND dataRow.bannerDevice == 2}">
									</i> -->
								</td>
								
								<th:block th:each="orderColumn : ${order}">
									<th:block th:if="${orderColumn.field == 'code'}">
										<td th:text="${dataRow.code}" 
											th:class="${orderColumn.field} + 'Show' + ${orderColumn.isChecked() ? '' : ' hidden'}"></td>
									</th:block>
									
									<th:block th:if="${orderColumn.field == 'title'}">
										<td th:text="${dataRow.title}" 
											th:class="${orderColumn.field} + 'Show' + ${orderColumn.isChecked() ? '' : ' hidden'}"></td>
									</th:block>
									
									<th:block th:if="${orderColumn.field == 'bannerPhysicalUrl'}">
										<td th:class="${orderColumn.field} + 'Show' + ${orderColumn.isChecked() ? ' tbl-img' : ' hidden tbl-img'}">
											
											<th:block th:if="${dataRow.bannerType == 1}">
												<img class="img_banner" th:src="@{/cmsAjax/download?fileName=} + ${dataRow.bannerPhysicalUrl}"/>
												<div class="img_banner_big">
													<img th:src="@{/cmsAjax/download?fileName=} + ${dataRow.bannerPhysicalUrl}"/>
			 									</div>
											</th:block>
											
											<video class="videoContent img_banner" controls="controls" 
											th:attr="data-banner-video=@{/cmsAjax/download?fileName=} + ${dataRow.bannerPhysicalUrl}"
											th:if="${dataRow.bannerType != '1'} AND ${dataRow.bannerVideoType == 1}">
												<source th:src="@{/cmsAjax/download?fileName=} + ${dataRow.bannerPhysicalUrl}" type="video/mp4" />
 												<source th:src="@{/cmsAjax/download?fileName=} + ${dataRow.bannerPhysicalUrl}" type="video/ogg" />
												<source th:src="@{/cmsAjax/download?fileName=} + ${dataRow.bannerPhysicalUrl}" type="video/x-flv">
											</video>
											<div>
											<video class="videoContent img_banner_big" controls="controls" 
											th:attr="data-banner-video=@{/cmsAjax/download?fileName=} + ${dataRow.bannerPhysicalUrl}"
											th:if="${dataRow.bannerType != '1'} AND ${dataRow.bannerVideoType == 1}" style="width: 500px;">
												<source th:src="@{/cmsAjax/download?fileName=} + ${dataRow.bannerPhysicalUrl}" type="video/mp4" />
 												<source th:src="@{/cmsAjax/download?fileName=} + ${dataRow.bannerPhysicalUrl}" type="video/ogg" />
												<source th:src="@{/cmsAjax/download?fileName=} + ${dataRow.bannerPhysicalUrl}" type="video/x-flv">
											</video>
											</div>
											
											<div th:if="${dataRow.bannerType != '1'} AND ${dataRow.bannerVideoType == 2}" class="divIframeVideo" 
												th:id="'divIframeVideo' + ${i.index}">
												<iframe width="600" height="493" class="iframe" th:id="'iframe' + ${i.index}" th:src="${dataRow.bannerYoutubeVideo}"></iframe>
											</div>
											
											<input type="hidden" class="physicalImg" th:value = "${dataRow.bannerPhysicalUrl}"/>
										</td>
									</th:block>
									
									<th:block th:if="${orderColumn.field == 'bannerTypeName'}">
										<td th:text="${dataRow.bannerTypeName}" 
											th:class="${orderColumn.field} + 'Show' + ${orderColumn.isChecked() ? '' : ' hidden'}"></td>
									</th:block>
									
									<th:block th:if="${orderColumn.field == 'bannerDeviceName'}">
										<td th:text="${dataRow.bannerDeviceName}" 
											th:class="${orderColumn.field} + 'Show' + ${orderColumn.isChecked() ? '' : ' hidden'}"></td>
									</th:block>
									
									<th:block th:if="${orderColumn.field == 'createBy'}">
										<td th:text="${dataRow.createBy}" 
											th:class="${orderColumn.field} + 'Show' + ${orderColumn.isChecked() ? '' : ' hidden'}"></td>
									</th:block>
									
									<th:block th:if="${orderColumn.field == 'createDate'}">
										<td th:text="${dataRow.createDate } ? ${#dates.format(dataRow.createDate, 'dd/MM/yyyy')}"
											th:class="${orderColumn.field} + 'Show' + ${orderColumn.isChecked() ? ' text-center' : 'text-center hidden'}"></td>
									</th:block>
									
									<th:block th:if="${orderColumn.field == 'updateBy'}">
										<td th:text="${dataRow.updateBy}"
											th:class="${orderColumn.field} + 'Show' + ${orderColumn.isChecked() ? '' : ' hidden'}"></td>
									</th:block>
									
									<th:block th:if="${orderColumn.field == 'updateDate'}">
										<td th:text="${dataRow.createDate } ? ${#dates.format(dataRow.updateDate, 'dd/MM/yyyy')}"
											th:class="${orderColumn.field} + 'Show' + ${orderColumn.isChecked() ? ' text-center' : ' text-center hidden'}"></td>
									</th:block>
								</th:block>
							</tr>
						</th:block>
					</tbody>
				</table>
			</div>
		</div>
		<th:block th:include="views/commons/pagination.html :: content" />
	   <script th:inline="javascript">
			/*<![CDATA[*/
		        SEARCH_DTO = [[${searchDto}]];
		    /*]]>*/
			var C_NAME = "BANNER_SEARCH";
		 	var DATE_FORMATE_TYPE = "FULL_DATE";
       </script>
		<script type="text/javascript" th:src="@{/static/CMS/all/banner/js/banner-list.js}"></script>
	</body>
</html>
