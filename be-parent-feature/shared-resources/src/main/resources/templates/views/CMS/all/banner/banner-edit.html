<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{templates/unit-layout}" layout:fragment="body">
<body>

	<link rel="stylesheet" type="text/css"
		th:href="@{/static/CMS/banner/css/banner-edit.css}" />

	<script th:inline="javascript">
		/*<![CDATA[*/
		var EDIT_DTO = /*[[${editDto}]]*/;
		var LANGUAGE_LIST = /*[[${languageList}]]*/;
		var MSG_ERROR_MIN_SIZE_DESKTOP = [[#{message.confirm.upload.image.banner.desktop.error}]];
		var MSG_ERROR_MIN_SIZE_MOBILE = [[#{message.confirm.upload.image.banner.mobile.new.error}]];
		var MSG_ERROR_MIN_SIZE_VIDEO = [[#{message.confirm.upload.image.banner.desktop.error}]];
		var TEXT_DESKTOP = [[#{message.text.image.banner.desktop}]];
		var TEXT_MOBILE =  [[#{message.text.image.banner.mobile}]];
		var TEXT_MOBILE_APP =  [[#{message.text.banner.mobileapp}]];
		
		var ERROR_FILE_EXTENSTION =  [[#{message.error.file.extention}]];
		var ERROR_VIDEO_SIZE =  [[#{message.error.video}]];
		var ERROR_IMG_SIZE_3MB =  [[#{message.error.img}]];
		var ERROR_IMG_SIZE_1MB=  [[#{message.error.img_1mb}]];
	    var ERROR_IMG_LENGHT =  [[#{message.error.img.heigh.and.width}]];
	    var ERROR_SPECIAL_CHARACTERS =  [[#{data.validate.specialCharacters}]];
		/*]]>*/
	</script>

	<div class="title-head">
		<div class="row">
			<div class="col-md-5">
				<h3>
					<span th:text="#{banner.edit.title}">Tiêu đề trang</span>
				</h3>
			</div>
			<div class="col-md-7">
				<div class="pull-right">
					<a class="u-btn u-btn-back" id="linkList"> <img
						th:src="@{/static/images/icon-down.png}" alt="" width="17px"
						class="rotate-ico" /> <span>Trở lại</span>
					</a> <a class="u-btn u-btn-primary" th:if="${editDto.id != null}"
						id="addNew"> <img
						th:src="@{/static/images/ico-plus-white.png}" alt="" /> <span>Thêm
							mới</span>
					</a>
				</div>
			</div>
		</div>
	</div>

	<form th:action="@{/banner/edit}" th:object="${editDto}" method="POST"
		class="form-horizontal u-for-page-top j-form-validate" id="bannerForm">
		<th:block
			th:include="views/commons/message-alert.html :: content(${messageList})" />

		<div class="bg-content">
			<div class="row">
				<div class="col-md-6 no-padding">
					<div class="form-group"
						th:classappend="${#fields.hasErrors('code')} ? has-error : ''">
						<label for="code" class="col-sm-4 col-md-4"
							th:text="#{banner.code}">Mã banner</label>
						<div class="col-sm-8 col-md-8">
							<input type="text" th:field="*{code}"
								class="form-control text-uppercase  j-maxlength"
								data-rule-maxlength="30" readonly="readonly" /> <span
								class="help-block" th:if="${#fields.hasErrors('code')}"
								th:errors="*{code}"></span>
						</div>
					</div>
				</div>
			</div>

			<div class="row">
				<div class="col-md-6 no-padding">
					<div class="form-group"
						th:classappend="${#fields.hasErrors('code')} ? has-error : ''">
						<label class="col-sm-4 col-md-4" th:text="#{banner.type}">Loại
							banner</label>
						<div class="col-sm-8 col-md-8">
							<select class="form-control" th:field="*{bannerType}"
								th:data-placeholder="#{banner.device}">
								<option th:each="obj : ${listDataType}" th:value="${obj.id}"
									th:text="${obj.name}"
									th:selected="(${obj.id} == *{bannerType})"></option>
							</select>
						</div>
					</div>
				</div>

				<div class="col-md-6">
					<div class="form-group">
						<label class="col-sm-4 col-md-4" th:text="#{banner.device}">Thiết
							bị</label>
						<div class="col-sm-8 col-md-8">
							<select class="form-control" th:field="*{bannerDevice}"
								th:data-placeholder="#{banner.device}">
								<option th:each="obj : ${listDataDevice}" th:value="${obj.id}"
									th:text="${obj.name}"
									th:selected="(${obj.id} == *{bannerDevice})"></option>
							</select>
						</div>
						<a class="col-sm-12 mt-5" id="titleMobileApp"></a>
					</div>
				</div>
			</div>

			<!-- <div class="col-xs-12 col-sm-12">
				<div class="form-group no-bmargin gr-tab">
					<ul class="nav nav-tabs" id="tabLanguage">
						<th:block th:each="language, i : ${languageList}">
							<li role="presentation" th:classappend="${i.index == 0}  ? 'active' : ''" th:id="tabLanguage__${i.index}__">
								<a th:href="'#language' + ${i.index}" th:text="${language.name}"></a>
							</li>
						</th:block>
					</ul>
				</div>
			</div> -->
			<div class="row">
				<div class="form-group ">
					<label class="col-md-2 col-sm-2"
						th:text="#{account.channel}">Kênh</label>
					<div class="col-sm-4">
						<select class="form-control select2" th:field="*{channelList}"
							multiple="multiple" id="channelId">
							<option th:each="channel : ${channels}"
								th:value="${channel.code}"
								th:selected="${channelList != null and channelList.contains(channel.code)}"
								th:text="${channel.code} + ' - ' + ${channel.name}"></option>
						</select>
					</div>
				</div>
			</div>

			<div class="tab-content" style="margin-top: 10px">
				<th:block th:each="language, i : ${languageList}"
					th:with="index=${i.index}">
					<div th:id="language__${index}__" class="tab-pane fade "
						th:classappend="${index == 0}  ? 'in active' : ''">
						<div class="row">
							<div class="form-group"
								th:classappend="${#fields.hasErrors('bannerLanguageList[__${index}__].title')} ? has-error : ''">
								<label th:id="'bannerTitle' + ${index}"
									class="lb_language col-sm-4 col-md-2 required"
									th:text="#{banner.name}">Tên Banner</label>
								<div class="col-sm-8 col-md-10 ">
									<input th:type="text"
										class="form-control j-maxlength j-required vietnamese-characters"
										data-rule-maxlength="200" maxlength="200" th:id="'bannerInputTitle'+ ${index}"
										th:field="*{bannerLanguageList[__${index}__].title}" /> <span
										class="help-block"
										th:if="${#fields.hasErrors('*{bannerLanguageList[__${index}__].title}')}"
										th:errors="*{bannerLanguageList[__${index}__].title}"></span>
								</div>
							</div>
							<div class="form-group"
								th:classappend="${#fields.hasErrors('enabled')} ? has-error : ''">
								<label th:id="'bannerEnabled' + ${index}"
									class="lb_language col-sm-4 col-md-2"
									th:text="#{banner.enabled}">Tên Banner</label>
								<div class="col-sm-8 col-md-10 ">
									<input th:type="checkbox" value="1" maxlength="200"
										th:id="'bannerInputEnabled'+ ${index}" th:field="*{enabled}" />
								</div>
							</div>
							<div class="form-group "
								th:classappend="${#fields.hasErrors('bannerLanguageList[__${index}__].bannerLink')} ? has-error : ''">
								<label class="lb_language col-sm-4 col-md-2 "
									th:text="#{banner.link}">Link banner</label>
								<div class="col-sm-8 col-md-10 ">
									<input type="text" class="form-control j-maxlength "
										data-rule-maxlength="500" maxlength="500"
										th:field="*{bannerLanguageList[__${index}__].bannerLink}" />
									<span class="help-block"
										th:if="${#fields.hasErrors('bannerLanguageList[__${index}__].bannerLink')}"
										th:errors="*{bannerLanguageList[__${index}__].bannerLink}"></span>
								</div>
							</div>

							<div class="form-group" id="divImg">
								<label th:id="'bannerImageLBL' + ${index}"
									class="lb_language col-sm-4 col-md-2 required"
									th:text="#{banner.image}">Banner</label>
								<div class="controls col-sm-8 col-md-10 ">
									<div>
										<div class="wrap_upload form-group" th:id="imageContainer__${index}__">
											<button class="u-btn btn-upload-file" type="button"
												th:id="imgPickfiles__${index}__" href="javascript:void(0)"
												th:title="#{icon.add}">
												<img th:src="@{/static/images/icon-down.png}" alt=""
													width="17px" class="rotate-180-ico">
											</button>
											<span class="pos-4" th:id="${'spanImg'+index}"> <a
												id="titleImgPC"></a> <a id="titleImgMobile"></a>
											</span>
										</div>



										<div>
											<div th:id="imageConsole__${index}__" style="display: none"
												th:for="imageConsole__${index}__"
												class="error"></div>
											<div class="wrap_img form-group">
												<img th:id="img_banner__${index}__" class="img_banner"
													style="width: 100%" />
												<div th:id="imageFilelist__${index}__">Your browser
													doesn't have Flash, Silverlight or HTML5 support.</div>
												<input class="j-required" type="hidden"
													th:id="physicalImg__${index}__"
													th:field="*{bannerLanguageList[__${index}__].bannerPhysicalImg}" />
												<input type="hidden" th:id="bannerImg__${index}__"
													th:field="*{bannerLanguageList[__${index}__].bannerImg}" />
											</div>
										</div>
									</div>
								</div>


							</div>

							<div class="form-group" id="divVideo">
								<label class="lb_language col-sm-4 col-md-2 required"
									th:text="#{banner.video}">Video đính kèm</label>
								<div class="controls col-sm-8 col-md-10 ">
									<!--									<div>-->
									<!--										<input type="checkbox"-->
									<!--											th:id="bannerVideoType__${index}__"-->
									<!--											th:name="'bannerLanguageList[__${index}__].bannerVideoType'" -->
									<!--											th:checked="*{bannerLanguageList[__${index}__].bannerVideoType} != 1 " />-->
									<!--										<label class="control-label"-->
									<!--											th:text="#{banner.youtube}">Video from Youtube</label>-->
									<!--									</div>-->

									<!--									<div id="divVideoYoutube">-->
									<!--										<div class="form-group">-->
									<!--											 <input th:class="*{bannerLanguageList[__${index}__].bannerVideoType} != 1 ? 'form-control j-required' : 'form-control'" -->
									<!--											 	th:id="bannerYoutubeVideo__${index}__" -->
									<!--											 	placeholder="https://www.youtube.com/"-->
									<!--											 	th:field="*{bannerLanguageList[__${index}__].bannerYoutubeVideo}" />-->
									<!--										</div>-->
									<!--										-->
									<!--										<div class="form-group" th:id="divPhysicalYoutubeVideo__${index}__">-->
									<!--											<iframe th:id="bannerPhysicalYoutubeVideo__${index}__" width="600" height="493" -->
									<!--												src=""></iframe>-->
									<!--										</div>-->
									<!--									</div>-->

									<div id="divVideoPhysical">
										<div>
											<div class="wrap_upload form-group" th:id="videoContainer__${index}__">

												<button class="u-btn btn-upload-file" type="button"
													th:title="#{icon.add}" href="javascript:void(0)"
													th:id="videoPickfiles__${index}__">
													<img th:src="@{/static/images/icon-down.png}" alt=""
														width="17px" class="rotate-180-ico">
												</button>
												<span class="pos-4"  style="color: #00357f!important"> (.mp4, .flv, tối đa 10MB)</span>
											</div>
										</div>

										<div>
											<div class="wrap_video form-group" th:id="wrap_video__${index}__">
												<div th:id="videoConsole__${index}__" style="display: none"
													class="error"></div>
												<a id="titleExtention"></a>
												<div th:id="videoFilelist__${index}__">Your browser
													doesn't have Flash, Silverlight or HTML5 support.</div>
												<div class="wrap_object" th:id="wrap_object__${index}__">
													<video th:id="videoContent__${index}__"
														class="videoContent" controls="controls"
														style="width: 100%">
														<source src="" type="video/mp4" />
														<source src="" type="video/ogg" />
														<source src="" type="video/x-flv">
														<source src="" type="video/webm">
													</video>
												</div>
												<input
													th:class="*{bannerLanguageList[__${index}__].bannerVideoType} != 1 ? 'form-control' : 'form-control j-required'"
													type="hidden" th:id="physicalVideo__${index}__"
													th:field="*{bannerLanguageList[__${index}__].bannerPhysicalVideo}" />
												<input type="hidden" th:id="bannerVideo__${index}__"
													th:field="*{bannerLanguageList[__${index}__].bannerVideo}" />

											</div>
										</div>
									</div>
								</div>
							</div>

							<input type="hidden"
								th:field="*{bannerLanguageList[__${index}__].id}" /> <input
								type="hidden"
								th:name="'bannerLanguageList[' + ${index} + '].languageCode'"
								th:value="${language.code}" />
						</div>
				</th:block>
			</div>

			<div class="row m-0 pos-gr-btn" th:if="${editDto.hasEdit}">

				<button type="button" class="u-btn u-btn-primary" id="btnSave">
					<img th:src="@{/static/images/icon-save.png}" alt="" width="19px" />
					<span th:text="#{save.button}">Lưu</span>
				</button>
			</div>

		</div>

		<input type="hidden" th:field="*{id}" /> <input type="hidden"
			id="url" name="url" th:value="${editDto.url}" /> <input
			type="hidden" id="requestToken" th:field="*{requestToken}" /> <input
			type="hidden" th:field="*{referenceType}" /> <input type="hidden"
			th:field="*{referenceId}" /> <input type="hidden" id="buttonAction"
			name="buttonAction" /> <input type="hidden" id="fieldSearchHidd" />
		<input type="hidden" id="fieldValuesHidd" /> <input type="hidden"
			th:field="*{codeSearch}" /> <input type="hidden"
			th:field="*{nameSearch}" /> <input type="hidden"
			th:field="*{statusSearch}" /> <input type="hidden"
			th:field="*{updateDate}" /> <input type="hidden"
			th:field="*{hasEdit}" />
	</form>
	<script type="text/javascript"
		th:src="@{/static/CMS/all/banner/js/banner-edit.js}"></script>
		
    <script  type="text/javascript" th:src="@{/static/js/flv.min.js}"></script>

</body>
</html>