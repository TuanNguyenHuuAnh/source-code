<!DOCTYPE html>
<html xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
  layout:decorate="~{templates/unit-layout}"
  layout:fragment="body">
	<script type="text/javascript" th:src="@{/static/cache/jquery/multiple-select/js/jquery.multiselect.js}"></script>
	<link rel="stylesheet" type="text/css" th:href="@{/static/cache/jquery/multiple-select/css/jquery.multiselect.css}" />
<body>	
	<div class="title-head">
		<div class="row">
			<div class="col-md-5">
				<h3>
					<span th:text="#{email.send.management}">Tiêu đề trang</span>
				</h3>
			</div>

		</div>	
	</div>	

	<div id="send_msg"></div>
	<form class="form-horizontal u-for-page-top j-formSearch" th:action="@{/email/email-list}" th:object="${searchDto}" method="POST" role="form">	
		<th:block th:include="views/commons/message-alert.html :: content(${messageList})" />
		<div class="bg-content clearfix">
			<div data-toggle="collapse" data-target="#search-box" class="header-box"> 
               <h2 class="title-box" th:text="#{search.title}">Vùng tìm kiếm</h2>
               <i class="fa fa-minus pull-right" aria-hidden="true"></i> 
            </div>
            <div class="collapse in" id="search-box">
            	<div class="row">
            		<div class="col-md-4 form-group">
							<input type="text" class="form-control" th:field="*{fieldSearch}" th:placeholder="#{search.key}" autocomplete="off"/>
						</div>
						<div class="col-md-2 form-group">
							<select th:field="*{fieldValues}" multiple="multiple" class="form-control" id="search-filter">
							<th:block th:each="item : ${fieldSelect}">
								<option th:value="${item.value}"
									th:selected="${searchDto.fieldValues} ? ${#arrays.contains(searchDto.fieldValues,item.value)}: false"   
									th:text="#{${item.name}}"></option>
							</th:block>
							</select>
						</div>
						<label class="col-md-1" th:text="#{email.send.search.from}"></label>
						<div class="col-md-2">
							<div class="input-group date datepicker-from-date">
								<input class="form-control " th:field="*{fromDate}" autocomplete="off"/>
								<span class="input-group-addon fromDate">
									<i class="fa fa-calendar"></i>
								</span>
							</div>
						</div>
						<label class="col-md-1" th:text="#{email.send.search.to}"></label>
						<div class="col-md-2 form-group">
							<div class="input-group date datepicker-to-date">
								<input class="form-control" th:field="*{toDate}" autocomplete="off"/><span
								class="input-group-addon toDate"><i
								class="fa fa-calendar"></i></span>
							</div>
						</div>
					</div>
					<div class="col-xs-12 col-sm-12 form-group m-0 p-0">
						<div th:if="${companyList.size()>1}">
							<label for="companyId" class="col-md-2 align-top" th:text="#{company.detail}">Company</label>
							<div class="col-md-4 form-group">
								<select class="form-control select2" th:field="*{companyId}">
									<option th:each="company : ${companyList}" 
											th:value="${company.id}"
											th:text="${company.text}"
											th:selected="${company.id}==${companyId}">
									</option>
								</select>
							</div>
						</div>
						<input type="hidden" th:unless="${companyList.size()>1}" th:field="*{companyId}" />
						<label for="sendStatus" class="col-md-2 align-top" th:text="#{email.status}">sendStatus</label>
						<div class="col-md-4 form-group">
							<select class="form-control" th:field="*{sendStatus}">
								<option value="">All</option>
								<option th:each="constantDisplay : ${listStatus}" th:value="${constantDisplay.code}" th:text="${constantDisplay.name}" style="text-transform: uppercase;"></option>
							</select>
						</div>	
						<!-- <div class="col-md-2">
					        <a class="btn-common" id="btnSearch">
								<i class="fa fa-search"></i>
								<span th:text="#{search.button}"></span>
							</a>
						</div> -->
					</div>
					<div class="row m-0 pos-gr-btn">
						<button type="submit" class="u-btn u-btn-primary" id="btnSearch">
					       <i class="fa fa-search"></i>
					       <span th:text="#{search.button}"></span>
					   </button>
					</div>
				</div>
			</div>
		<!-- </div> -->
	</form>	
	<div class=" bg-content-tbl" id="tableList">
		<th:block th:include="views/email/email-table.html :: content"/>
	</div>

	<th:block th:include="views/email/email-detail.html :: content"/>
	<input type="hidden" id="fieldSearchHidden"/>
	<input type="hidden" id="fieldValuesHidden"/>
			<input type="hidden"id="urlSearch"/>
	
	<script type="text/javascript" th:src="@{/static/cache/js/email/email-list.js}"></script>
</body>      	   
</html>
