<!DOCTYPE html>
<html xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
  layout:decorate="~{templates/unit-layout}"
  layout:fragment="body">
<body>		
	<div class="title-head clearfix">
	   <div class="col-sm-9 col-xs-7 no-padding">
			<h3>
				<i class="fa fa-table"></i>
				<span th:text="#{serial.info.page}">Tiêu đề trang</span>
			</h3>
	   </div>
	   <div class="col-sm-3 col-xs-5 icon-head">
	        <div class="pull-right">
				 <a>
				 	<i class="fa fa-arrow-circle-left icon-head-red" id="linkList"></i>
				 </a>
				 <a>
				 	<i class="fa fa-plus-circle icon-head-red" id = "add" th:if="${#authorization.expression('hasAuthority(@roleConstant.SERIAL_INFO)')}"></i>
				 </a>
				 <a class="font17 btn-save" th:if="${#authorization.expression('hasAuthority(@roleConstant.SERIAL_INFO)')}"> 
					<i class="fa fa-save"></i>
				</a>
	        </div>
	   </div>
	</div>	
	<form class="form-horizontal u-for-page-top j-form-validate" id = "form-serial-info-edit" th:action="@{/region/edit}" th:object="${serialInfoDto}" method="post" role="form">
	    <div id="message">
	       <th:block th:include="views/commons/message-alert.html :: content(${messageList})"/>
	    </div>
		<div class="bg-content clearfix">
			<div class="header-box">
				<h2 class="title-box" th:text="#{serial.info.edit.title}" th:if="${serialInfoDto.serialInfoId != null}">Cập nhật mã</h2>
				<h2 class="title-box" th:text="#{serial.info.create.title}" th:if="${serialInfoDto.serialInfoId == null}">Tạo mã</h2>
			</div>
            <input type="hidden" th:field="*{serialInfoId}" />
			<div class="col-md-6">
				<div class="form-group" th:classappend="${#fields.hasErrors('template')} ? has-error : ''">
					<label class="col-sm-3 required" for="template" th:text="#{serial.info.template}">Mẫu</label>
					<div class="col-sm-9" >
						<input type="text" th:field="*{template}" class="form-control j-maxlength j-required" data-rule-maxlength="255"/>
						<span class="help-block" th:if="${#fields.hasErrors('template')}" th:errors="*{template}"></span>
					</div>
				</div>
				<div class="form-group" th:classappend="${#fields.hasErrors('dateFormat')} ? has-error : ''">
                    <label class="col-sm-3" for="dateFormat"> <span th:text="#{serial.info.date.format}">Định dạng ngày</span> {SysDate}</label>
                    <div class="col-sm-9" >
                        <select class="form-control" name="dateFormat">
                            <option></option>
                            <option th:each="item : ${formatDateList}" 
                               th:value="${item.cat}"
                               th:selected="(${item.cat} == *{dateFormat})" 
                               th:text="${item.catAbbrName}">
                            </option>
                        </select>
                        <span class="help-block" th:if="${#fields.hasErrors('dateFormat')}" th:errors="*{dateFormat}"></span>
                    </div>
                </div>
				<div class="form-group" th:classappend="${#fields.hasErrors('effectedDate')} ? has-error : ''">
					<label class="col-sm-3 required" for="effectedDate" th:text="#{serial.info.effected.date}">Ngày hiệu lực</label>
					<div class="col-sm-9" >
						<div class="input-group date datepicker">
			   		 		<input type="text" class="form-control j-required" name="effectedDate" autocomplete="off"
                                   th:value="${serialInfoDto.effectedDate} ? ${#dates.format(serialInfoDto.effectedDate, session.formatDate)}"/>
                            <div class="input-group-addon"><i class="fa fa-calendar"></i></div>
			   		    </div>
						<span class="help-block" th:if="${#fields.hasErrors('effectedDate')}" th:errors="*{effectedDate}"></span>
					</div>
				</div>
				<div class="form-group" th:classappend="${#fields.hasErrors('expiredDate')} ? has-error : ''">
					<label class="col-sm-3 required" for="expiredDate" th:text="#{serial.info.expired.date}">Ngày hết hạn</label>
					<div class="col-sm-9" >
						<div class="input-group date datepicker">
			   		 		<input type="text" class="form-control j-required" name="expiredDate" autocomplete="off"
                                   th:value="${serialInfoDto.expiredDate} ? ${#dates.format(serialInfoDto.expiredDate, session.formatDate)}"/>
                            <div class="input-group-addon"><i class="fa fa-calendar"></i></div>
			   		    </div>
						<span class="help-block" th:if="${#fields.hasErrors('expiredDate')}" th:errors="*{expiredDate}"></span>
					</div>
				</div>
			</div>
			<div class="col-md-6">
			    <div class="form-group">
                    <label class="col-sm-3" for="example" th:text="#{serial.info.example}">Ví dụ</label>
                    <div class="col-sm-9" >
                        <div class="input-group">
                            <input type="text" class="form-control" name="example" autocomplete="off" placeholder="INVOICE-{SeqNumber}/UNIT-{SysDate}" disabled="disabled" th:value="*{exampleSerial}"/>
                            <div class="input-group-addon" id="review" th:text="#{serial.info.review}">Xem</div>
                        </div>
                    </div>
                </div>
				<div class="form-group" th:classappend="${#fields.hasErrors('numberFormat')} ? has-error : ''">
					<label class="col-sm-3" for="numberFormat"> <span th:text="#{serial.info.number.format}">Định dạng số</span> {SeqNumber}</label>
					<div class="col-sm-9" >
						<input type="text" th:field="*{numberFormat}" class="form-control"/>
						<span class="help-block" th:if="${#fields.hasErrors('numberFormat')}" th:errors="*{numberFormat}"></span>
					</div>
				</div>
				<div class="form-group" th:classappend="${#fields.hasErrors('startNumber')} ? has-error : ''">
					<label class="col-sm-3" for="startNumber" th:text="#{serial.info.start.number}">Số bắt đầu</label>
					<div class="col-sm-9" >
						<input type="text" th:field="*{startNumber}" class="form-control e-only-number c-group-numberFormat" disabled="disabled"/>
						<span class="help-block" th:if="${#fields.hasErrors('startNumber')}" th:errors="*{startNumber}"></span>
					</div>
				</div>
				<div class="form-group" th:classappend="${#fields.hasErrors('increaseNumber')} ? has-error : ''">
					<label class="col-sm-3" for="increaseNumber" th:text="#{serial.info.increase.number}">Tăng</label>
					<div class="col-sm-9" >
						<input type="text" th:field="*{increaseNumber}" class="form-control e-only-number c-group-numberFormat" disabled="disabled"/>
						<span class="help-block" th:if="${#fields.hasErrors('increaseNumber')}" th:errors="*{increaseNumber}"></span>
					</div>
				</div>
		        <div class="form-group">
		            <label for="description" class="col-sm-3" th:classappend="${#fields.hasErrors('description')} ? has-error : ''" th:text="#{serial.info.description}">Mô tả</label>
		            <div class="col-sm-9">
		            	<textarea rows="3" th:field="*{description}" class="col-sm-10 form-control j-maxlength" data-rule-maxlength="65535" ></textarea>                
		                <span class="help-block" th:if="${#fields.hasErrors('description')}" th:errors="*{description}"></span>
		            </div>
		        </div>
			</div>
			<div class="col-xs-12 col-sm-12 footer-box-bg">
				<a class="btn-cancel" id = "cancel">
					<i class="fa fa-times"></i>
					<span th:text="#{cancel.button}">Thoát</span>
				</a>
				<a class="btn-common btn-save"
					th:if="${#authorization.expression('hasAuthority(@roleConstant.SERIAL_INFO)')}">
					<i class="fa fa-floppy-o" aria-hidden="true"></i> 
					<span th:text="#{save.button}">Lưu</span>
				</a>
			</div>
		</div>
	</form>	
	<input type="hidden" id="url" name="url" th:value="${serialInfoDto.url}"/>
	<script type="text/javascript" th:src="@{/static/cache/js/serial-info/serial-info-edit.js}"></script>
	<script type="text/javascript" th:inline="text">
        var msgRe = 'Lỗi';
    </script>
	</body>
</html>