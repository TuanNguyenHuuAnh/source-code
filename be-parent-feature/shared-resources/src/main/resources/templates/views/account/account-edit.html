<!DOCTYPE html>
<html xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
  layout:decorate="~{templates/unit-layout}"
  layout:fragment="body">
<link rel="stylesheet" type="text/css" th:href="@{/static/cache/jquery/multiple-select/css/jquery.multiselect.css}"/>
<script type="text/javascript" th:src="@{/static/cache/jquery/multiple-select/js/jquery.multiselect.js}"></script>
<!-- EasyUI - Multiple component support -->
<link rel="stylesheet" type="text/css" th:href="@{/static/cache/plugins/jquery-easyui-1.5/easyui.css}" />
<link rel="stylesheet" type="text/css" th:href="@{/static/cache/plugins/jquery-easyui-1.5/icon.css}" />
<script type="text/javascript" id="script-easyui" th:src="@{/static/cache/plugins/jquery-easyui-1.5/jquery.easyui.min.js}"></script>    
<div class="title-head">
	<div class="row">
		<div class="col-md-5">
			<h3>
				<span th:text="#{account.edit.page}">TiÃªu Ä‘á»� trang</span>
			</h3>
		</div>
	   	<div class="col-md-7">
	        <div class="pull-right">
				 <a class="u-btn u-btn-back" id="linkList">
				 	<img th:src="@{/static/images/icon-down.png}" alt="" width="17px" class="rotate-ico"/>
				 	<span th:text="#{comeback.button}">Trá»Ÿ láº¡i</span>
				 </a>
				 <a class="btn-save btnSave u-btn u-btn-primary" th:if="${#authorization.expression('hasAuthority(@roleConstant.ACCOUNT)')}"> 
					<img th:src="@{/static/images/icon-save.png}" alt="" width="19px"/>
					<span th:text="#{save.button}">LÆ°u</span>
				</a>
	        </div>
	   </div>
	</div>	
</div>


<div id="id-main-account">
<form th:action="@{/account/edit}"  method="POST" class="form-horizontal u-for-page-top j-form-validate" th:object="${accountDto}" id="id-form-account">
	<th:block th:include="views/commons/message-alert.html :: content(${messageList})"/>
	
	<div class="d-flex">
       <div class="info-profile col-left">
           <ul>
               <li class="center">
               		<div class="form-group" th:classappend="${#fields.hasErrors('avatar')} ? has-error : ''">
		                <div class="box-upload-avata">
		                	<img id="imgAccount" class="image-avatarFile" th:if="*{null != avatar  AND avatar != ''}" th:src="@{/ajax-file/download(filePath=*{avatar}, repositoryId=*{repositoryId})}"/>
		                    <img id="imgAccount" class="image-avatarFile" th:if="*{null == avatar OR avatar == ''}" th:src="@{/static/cache/images/user-default.png}"/>
	      				</div>
	       				<pre class="imageConsole-avatarFile" style="display: none; color: #f30;"></pre>
	       				<div class="form-group">
	           				<label class="u-btn u-btn-upload" th:title="#{account.avatar.upload.size}">
	           					<img th:src="@{/static/images/icon-attachment.png}" alt="" width="17px" >
	                			<span>
	                    			<span th:text="#{account.avatar.upload}">Upload</span><br/>
	                    			<input type="file" name="avatarFile" accept=".jpg,.jpeg,.png,.gif" class="hide" multiple="multiple" />
	                    			<input type="hidden" name="avatarFileName" class="avatarFile" />
	                			</span>
	            			</label>
	                        <span class="help-block" th:if="${#fields.hasErrors('avatar')}" th:errors="*{avatar}"></span>
	           			</div>
		            </div>

                   
               </li>
               <li>
                   <div class="d-flex pb-1">
                       <span class="mr-auto">
                           <th:block th:text="#{account.push.notification}" />
                       </span>
                       <div class="ml-auto">
                           <label class="switch">
                               <input type="checkbox" th:field="*{pushNotification}" checked=""/> 
                               <span class="slider round"></span>
                           </label>
                       </div>
                   </div>
                   <div class="d-flex pb-1">
                       <span class="mr-auto">
                          <th:block th:text="#{account.push.email}" />
                       </span>
                       <div class="ml-auto">
                           <label class="switch">
                               <input type="checkbox" th:field="*{pushEmail}" checked=""/> 
                               <span class="slider round"></span>
                           </label>
                       </div>
                   </div>
                   <div class="d-flex pb-1">
                       <span class="mr-auto">
                           <th:block th:text="#{account.enabled}" />
                       </span>
                       <div class="ml-auto">
                           <label class="switch">
                               <input type="checkbox" th:field="*{enabled}" checked=""/>
                               <span class="slider round"></span>
                           </label>
                       </div>
                   </div>
                   <div class="d-flex pb-1">
                       <span class="mr-auto">
                           <th:block th:text="#{account.locked}" />
                       </span>
                       <div class="ml-auto">
                           <label class="switch">
                              <input type="checkbox" th:field="*{locked}" checked=""/>
                               <span class="slider round"></span>
                           </label>
                       </div>
                   </div>
               </li>
           </ul>
           <input id="id-account-id" type="hidden" th:field="${accountDto.id}" />
	        <input th:field="*{username}" type="hidden"/>
       </div>
       <div class="user-info col-right">
           <div class="w80">
               <div class="header-collapse">
                    <h6 class="tt-collapse" th:text="#{account.edit.info}">ThÃ´ng tin ngÆ°á»�i dÃ¹ng</h6>
               </div>
               <div class="row">
                   <div class="form-group" th:classappend="${#fields.hasErrors('username')} ? has-error : ''" >
	                <label for="username" class="col-md-3 required" th:text="#{account.username}">TÃªn Ä‘Äƒng nháº­p</label>
	                <div class="col-md-9">
	                    <input th:field="*{username}" type="text" class="form-control j-required j-minlength j-username" disabled data-rule-minlength="4" maxlength="100"/>
	                    <span class="help-block" th:if="${#fields.hasErrors('username')}" th:errors="*{username}"></span>
	                </div>
	            </div>
	            <div class="form-group" th:classappend="${#fields.hasErrors('fullname')} ? has-error : ''">
	                <label for="fullname" class="col-md-3 required" th:text="#{account.fullname}">Há»� vÃ  tÃªn</label>
	                <div class="col-md-9">
	                    <input th:field="*{fullname}" type="text" class="form-control j-required" maxlength="255" />
	                    <span class="help-block" th:if="${#fields.hasErrors('fullname')}" th:errors="*{fullname}"></span>
	                </div>
	            </div>
	            <div class="form-group" th:classappend="${#fields.hasErrors('code')} ? has-error : ''" >
	                <label for="code" class="col-md-3" th:text="#{account.code}">MÃ£ nhÃ¢n viÃªn</label>
	                <div class="col-md-9">
	                    <input th:field="*{code}" type="text" class="form-control j-minlength j-code" data-rule-minlength="4" maxlength="100"/>
	                    <span class="help-block" th:if="${#fields.hasErrors('code')}" th:errors="*{code}"></span>
	                </div>
	            </div>
	            <div class="form-group">
	                <label for="birthday" class="col-md-3" th:text="#{account.birthday}">NgÃ y sinh</label>
	                <div class="col-md-9">
	                    <div class="input-group date datepicker p-0">
	                        <input class="form-control" th:field="*{birthday}" type="text" placeholder="dd/mm/yyyy" autocomplete="off" />
	                        <div class="input-group-addon">
	                            <i class="fa fa-calendar"></i>
	                        </div>
	                    </div>
	                </div>
	            </div>
	            <div class="form-group">
	                <label for="gender" class="col-md-3 " th:text="#{account.gender}">Gender</label>
	                <div class="col-md-9">
	                    <select class="form-control select2" th:field="*{gender}">
	                    	<option th:value="${NULL}"></option>
	                        <option th:each="gender : ${genders}" 
	                                th:value="${gender.Code}"
	                                th:text="${gender.name}">
	                        </option>
	                    </select>
	                </div>
	            </div>
	            <div class="form-group" th:classappend="${#fields.hasErrors('email')} ? has-error : ''" >
	                <label for="email" class="col-md-3 required" th:text="#{account.email}">Email</label>
	                <div class="col-md-9">
	                    <input th:field="*{email}" type="text" class="form-control j-required j-email" maxlength="255" />
	                    <span class="help-block" th:if="${#fields.hasErrors('email')}" th:errors="*{email}"></span>
	                </div>
	            </div>
	            <div class="form-group" th:classappend="${#fields.hasErrors('phone')} ? has-error : ''">
	                <label for="phone" class="col-md-3 " th:text="#{account.phone}">Sá»‘ Ä‘iá»‡n thoáº¡i</label>
	                <div class="col-md-9">
	                    <input th:field="*{phone}" type="text" class="form-control j-phone" maxlength="20" />
	                    <span class="help-block" th:if="${#fields.hasErrors('phone')}" th:errors="*{phone}"></span>
	                </div>
	            </div>
	            <div class="form-group" th:if="${companyList.size()>1}">
	                <label for="positionId" class="col-md-3 " th:text="#{company.detail}">Company</label>
	                <div class="col-md-9">
	                    <select class="form-control select2" th:field="*{companyId}">
	                        <option th:each="company : ${companyList}" 
	                                th:value="${company.id}"
	                                th:text="${company.text}">
	                        </option>
	                    </select>
	                </div>
	            </div>
	            <div  th:unless="${companyList.size()>1}">
	                <input type="hidden" id="companyId" name="companyId" th:value="${#authentication?.principal?.companyId}" />
	            </div>
	            <!-- <div class="form-group">
		                <label for="positionId" class="col-md-3" th:text="#{account.positionId}">Chá»©c vá»¥</label>
		                <div class="col-sm-8">
		                    <select class="form-control select2" th:field="*{positionId}">
		                        <option value=""></option>
		                        <option value="0" disabled="disabled">Unknown</option>
		                        <option th:each="positionDto : ${positionDtoList}" 
		                             	th:value="${positionDto.positionId}"
		                                th:text="${positionDto.positionNameAbv}">
		                        </option>
		                    </select>
		                    <input type="hidden" id="positionId" name="positionId" th:value="*{positionId}" th:if="*{positionId}==0"/>
		               	</div>
		             </div> -->
		            	<div id="position_group">
			               	<div class="form-group">
								<label for="groupId" class="col-md-3 " th:text="#{account.groupId}">Group</label>
								<div class="col-md-9 form-group">
									<select multiple="multiple" name = "groupId" id = "groupId">
										<th:block th:each="groupDto : ${groupDtoList}">
											<option th:value="${groupDto.teamId}"
												th:selected="${#arrays.contains(accountTeamIds, groupDto.teamId)}"
												th:text="${groupDto.nameAbv}"></option>
										</th:block>
									</select>
								</div>
							</div>
		            
			            <script th:inline="javascript">
						    /*<![CDATA[*/
						    var GROUP_LIST_DISABLE = /*[[${groupDtoListDisable}]]*/;
						    var IS_ADMIN = /*[[${#authentication?.principal?.companyAdmin}]]*/;
						    /*]]>*/
						</script>
		            </div>

						<div class="form-group">
							<label class="col-md-3" th:text="#{account.channel}">Channel</label>
							<div class="col-md-9">
								<select class="form-control" multiple="multiple"
									th:field="*{channelList}" id="channelId">
									<option th:each="channel : ${channels}"
										th:value="${channel.code}"
										th:selected="${channelList != null and channelList.contains(channel.code)}"
										th:text="${channel.code} + ' - ' + ${channel.name}">
									</option>
								</select>
							</div>
						</div>

						<!-- <div id="partner-group">
							<div class="form-group">
								<label class="col-md-3" th:text="#{account.partner}">Partner</label>
								<div class="col-md-9">
									<select class="form-control" multiple="multiple"
										th:field="*{partnerList}" id="partnerId">
										<option th:each="partner : ${partners}"
											th:value="${partner.code}"
											th:selected="${partnerList != null and partnerList.contains(partner.code)}"
											th:text="${partner.code} + ' - ' + ${partner.name}"></option>
									</select>
								</div>
							</div>
						</div> -->

					</div>

           </div>
       </div>
	</div>  
	<!-- <div class="bg-content-tbl" id="id-org-for-account"></div> -->
	<!-- <div class="bg-content clearfix bg-content-tbl" id="id-role-for-account">
		Load role-for-account from AJAX
		th:block th:include="views/account/role-for-account.html :: content"
	</div> -->
	
	<input type="hidden" id="url" name="url" th:value="${accountDto.url}"/>
</form>
</div>

<script th:inline="javascript">
    /*<![CDATA[*/
    var DEPARTMENT_LIST = /*[[${departmentList}]]*/;
    var BRANCH_LIST = /*[[${branchList}]]*/;
    var NOT_AN_ACCEPTED_FILE_TYPE = /*[[#{message.not.an.accepted.file.type}]]*/;
	var FILESIZE_IS_BIGGER = /*[[#{message.file.size.bigger}]]*/;
    /*]]>*/
</script>
<script type="text/javascript" th:src="@{/static/cache/js/account/account-edit.js}"></script>
</html>

