<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org">
<body th:fragment="content">

<!-- Start table fix-->		
<div class="col-sm-12 p-0">

<h2 class="title-box" th:text="#{search.results.title}">Kết quả tìm kiếm</h2>

<div style="float: right;
    padding: 0px;
    padding-left: 10px;
    position: relative;
    top: -5px;" th:object="${searchDto}">
	<select id="filter" class="form-control" th:field="*{filter}">
		<option th:value="0" th:text="#{common.all}"></option>
		<option
			th:each="item : ${T(vn.com.unit.ppl.enumdef.ArchiveStatus).getSelect2Dtos()}"
			th:value="${item.id}" th:text="#{${item.text}}"></option>
	</select>
</div>
<span style="float: right;" th:text="#{archive.table.status}">Filter</span>

<div class="table-responsive" id="tableList">
	<table class="table table-bordered table-striped">
      <thead>
          <tr>
              <th class="u_t_no">#</th>
              <th class="u_t_code" th:text="#{archive.table.doc.code}">Doc Code</th>
              <th class="u_t_name" th:text="#{archive.table.doc.name}">Doc Name</th>
              <th th:text="#{archive.table.archive.date}">Updated Date</th>
              <th th:text="#{archive.table.status}">Status</th>
              <th th:text="#{archive.table.message}">Message</th>
              <th th:text="#{archive.table.message.detail}">Message</th>
          </tr>
      </thead>
      <tbody>
          <th:block th:each="archiveHis,i : ${pageWrapper.data}" th:with="startIndex=${pageWrapper.startIndexCurrent}">
                 <tr th:attr="data-role-id=${archiveHis.id}">
                     <td class="text-center" th:text="${i.index + startIndex}"></td>
                     <td th:text="${archiveHis.docCode}"></td>
                     <td class="doc-title-table" th:text="${archiveHis.docName}"></td>
                     <td class="align-center">
                     	<th:block th:if="${archiveHis.updatedDate}" th:text="${#dates.format(archiveHis.updatedDate, @menuConfig.getFormDate() + ' HH:mm')}" />
                     	<th:block th:unless="${archiveHis.updatedDate}" th:text="${#dates.format(archiveHis.createdDate, @menuConfig.getFormDate() + ' HH:mm')}" />
                     </td>
                     <td class="align-center upper-case">
                         <th:block th:if="${archiveHis.status}" th:text="#{${T(vn.com.unit.ppl.enumdef.ArchiveStatus).resolveByValue(archiveHis.status).getCode()}}" />
                     </td>
                     <td>
                         <th:block th:if="${archiveHis.errorCode}" th:text="${T(vn.com.unit.ppl.enumdef.ArchiveErrorCode).getMessageError(@messageSource, archiveHis.errorCode)}" />
                     </td>
                     <td class="error-message" th:alt="${archiveHis.errorMessage}" th:style="${archiveHis.errorMessage != null} ? 'cursor: pointer;'">
                         <th:block th:if="${archiveHis.errorMessage}" th:text="${#strings.substring(archiveHis.errorMessage,0,19) + '...'}" />
                     </td>
                 </tr>
             </th:block>
             <th:block th:if="${pageWrapper.data.size() == 0}">
				<tr>
					<td colspan="100%" th:text="#{table.emptyTable.label}">No
						data found</td>
				</tr>
			</th:block>
      </tbody>
  </table>
	
</div>

</div>
<th:block th:include="views/commons/pagination.html :: content"/>
<script type="text/javascript" th:src="@{/static/cache/js/archive/archive-detail-table.js}"></script>
</body>
</html>

